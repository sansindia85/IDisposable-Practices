Ú
PG:\Prototypes\IDisposable-Practices\demo3\SqlConsumer\SqlConsumer.App\Program.cs
	namespace 	
SqlConsumer
 
. 
App 
{ 
class 	
Program
 
{ 
private		 
static		 
DatabaseState		 $
_databaseState		% 3
;		3 4
private

 
static

 
IConfiguration

 %
_config

& -
;

- .
static 
void 
Main 
( 
) 
{ 	
_config 
= 
new  
ConfigurationBuilder .
(. /
)/ 0
. 
AddJsonFile 
( 
$str 0
)0 1
. 
Build 
( 
) 
; 
Console 
. 
	WriteLine 
( 
$str U
)U V
;V W
var 
command 
= 
$str 
; 
while 
( 
command 
!= 
$str !
)! "
{ 
command 
= 
Console !
.! "
ReadLine" *
(* +
)+ ,
;, -
switch 
( 
command 
)  
{ 
case 
$str 
: 
GetDate 
(  
)  !
;! "
break 
; 
case 
$str 
: 
GC 
. 
Collect "
(" #
$num# $
,$ %
GCCollectionMode& 6
.6 7
Forced7 =
,= >
blocking? G
:G H
trueI M
,M N

compactingO Y
:Y Z
true[ _
)_ `
;` a
Console 
.  
	WriteLine  )
() *
$str* 3
)3 4
;4 5
break   
;   
}!! 
}"" 
}## 	
private%% 
static%% 
void%% 
GetDate%% #
(%%# $
)%%$ %
{&& 	
if'' 
('' 
_databaseState'' 
=='' !
null''" &
)''& '
{(( 
_databaseState)) 
=))  
new))! $
DatabaseState))% 2
())2 3
_config))3 :
))): ;
;)); <
}** 
Console++ 
.++ 
	WriteLine++ 
(++ 
_databaseState++ ,
.++, -
GetDate++- 4
(++4 5
)++5 6
)++6 7
;++7 8
},, 	
}-- 
}.. 